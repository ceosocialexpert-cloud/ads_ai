# Посібник з розгортання нових можливостей

Цей посібник допоможе вам розгорнути нові можливості управління проектами в AI Creative Generator.

## Передумови

Перед розгортанням переконайтесь, що у вас встановлено:

- Node.js 18+
- npm або yarn
- Акаунт Supabase
- Доступ до бази даних Supabase

## Кроки розгортання

### 1. Оновлення кодової бази

1. Отримайте останню версію коду:
```bash
git pull origin main
```

2. Встановіть нові залежності (якщо є):
```bash
npm install
```

### 2. Оновлення схеми бази даних

1. Перейдіть до інтерфейсу Supabase
2. Відкрийте **SQL Editor**
3. Створіть новий запит
4. Скопіюйте вміст файлу `supabase/migrations/002_project_enhancements.sql`
5. Виконайте запит

Альтернативно, якщо ви використовуєте локальне середовище Supabase:
```bash
npm run migrate
```

### 3. Оновлення змінних середовища

Перевірте, чи всі необхідні змінні середовища присутні у вашому файлі `.env.local`:

```bash
# Supabase
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# Gemini API
GEMINI_API_KEY=your_gemini_api_key

# Vertex AI (для генерації зображень)
GOOGLE_APPLICATION_CREDENTIALS=./service-account-key.json
VERTEX_AI_PROJECT_ID=your_project_id
```

### 4. Перезапуск додатку

1. Зупиніть поточний сервер (якщо запущений):
```bash
# Ctrl+C
```

2. Запустіть сервер розробки:
```bash
npm run dev
```

Або для production:
```bash
npm run build
npm run start
```

## Перевірка розгортання

Після розгортання перевірте наступне:

1. **Сторінка проектів**: Перейдіть на `/projects` і переконайтесь, що сторінка завантажується
2. **API ендпоінти**: Перевірте, чи доступні нові API ендпоінти:
   - `GET /api/projects`
   - `DELETE /api/projects`
3. **База даних**: Переконайтесь, що нові таблиці створені:
   - `target_audiences`
4. **Функціональність**: Проведіть тестовий аналіз і перевірте, чи зберігаються проекти

## Усунення проблем

### Проблеми з базою даних

Якщо виникають помилки з базою даних:

1. Перевірте, чи виконана міграція:
```sql
SELECT * FROM target_audiences LIMIT 1;
```

2. Якщо таблиця не існує, виконайте міграцію вручну через SQL Editor Supabase

### Проблеми з API

Якщо API ендпоінти не працюють:

1. Перевірте логи сервера на наявність помилок
2. Переконайтесь, що всі залежності встановлені
3. Перезапустіть сервер

### Проблеми з інтерфейсом

Якщо сторінки не завантажуються:

1. Перевірте консоль браузера на наявність помилок JavaScript
2. Переконайтесь, що всі необхідні файли існують
3. Очистіть кеш браузера

## Зворотна совместимість

Нові можливості зберігають зворотну совместимість з існуючими даними. Всі раніше створені проекти та креативи продовжать працювати.

Однак, для повної функціональності нових можливостей рекомендується провести повторний аналіз для створення окремих записів цільових аудиторій в новій таблиці.

## Підтримка

Якщо у вас виникли проблеми під час розгортання, зверніться до:

- [Документація Supabase](https://supabase.com/docs)
- [Документація Next.js](https://nextjs.org/docs)
- Посібник користувача в `docs/user-guide.md`